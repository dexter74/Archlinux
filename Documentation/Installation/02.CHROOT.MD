**Chroot**
```bash
arch-chroot /mnt ;
```

**TImezone et Synchronisation***
```bash
ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime ;
sed -i -e "s/\#NTP\=/\NTP\=fr.pool.ntp.org/g" /etc/systemd/timesyncd.conf ;
timedatectl set-ntp true ;
hwclock --systohc ;
```


**Clavier en FR**
```bash
loadkeys fr-pc ;
export LANG=fr_FR.UTF-8 ;
echo 'LANG=fr_FR.UTF-8'                 > /etc/locale.conf ;
echo 'LC_CTYPE="fr_FR.UTF-8"'          >> /etc/locale.conf ;
echo 'LC_NUMERIC="fr_FR.UTF-8"'        >> /etc/locale.conf ;
echo 'LC_TIME="fr_FR.UTF-8"'           >> /etc/locale.conf ;
echo 'LC_COLLATE="fr_FR.UTF-8"'        >> /etc/locale.conf ;
echo 'LC_MONETARY="fr_FR.UTF-8"'       >> /etc/locale.conf ;
echo 'LC_MESSAGES='                    >> /etc/locale.conf ;
echo 'LC_PAPER="fr_FR.UTF-8"'          >> /etc/locale.conf ;
echo 'LC_NAME="fr_FR.UTF-8"'           >> /etc/locale.conf ;
echo 'LC_ADDRESS="fr_FR.UTF-8"'        >> /etc/locale.conf ;
echo 'LC_TELEPHONE="fr_FR.UTF-8"'      >> /etc/locale.conf ;
echo 'LC_MEASUREMENT="fr_FR.UTF-8"'    >> /etc/locale.conf ;
echo 'LC_IDENTIFICATION="fr_FR.UTF-8"' >> /etc/locale.conf ;
echo 'LC_ALL='                         >> /etc/locale.conf ;
echo 'LANGUAGE="fr_FR:en_US"'          >> /etc/locale.conf ;
echo 'KEYMAP=fr'                        > /etc/vconsole.conf ;
echo 'fr_FR.UTF-8 UTF-8'                > /etc/locale.gen ;
locale-gen ;
```


**NANO par défaut**
```bash
echo "export EDITOR='/usr/bin/nano'" > ~/.bashrc ;
```


**Hostname et Host**
```bash
echo "archlinux" > /etc/hostname
echo "#IPV4
127.0.0.1       localhost
127.0.1.1       archlinux        archlinux
#127.0.1.1      archlinux.lan        archlinux
#IPV6 (OFF)
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters" > /etc/hosts ;
```


**AJout d'un USER**
```bash
/usr/sbin/useradd \
  --home-dir /home/marc --base-dir /home/marc \
  --uid 1005 \
  --groups wheel,storage,power --no-user-group \
  --shell /bin/bash \
  --comment 'Drthrax' \
  --create-home marc ;
```

**Changements des mot de passe :**

```bash
(echo "admin"; echo "admin") | passwd marc ;
(echo "root" ; echo "root")  | passwd root ;
```




**Sudoers le groupe Wheel**
```bash
sed -i -e "s/\# \%wheel ALL\=(ALL) NOPASSWD\: ALL/\%wheel ALL\=(ALL)  NOPASSWD\: ALL/g" /etc/sudoers ;
```

**Pacman (Sources)**
```bash
sed -i "/\[multilib\]/,/Include/"'s/^#//' /etc/pacman.conf ;
```

**Autoriser le SSH (ROOT)**
```bash
sed -i -e "s/\#PermitRootLogin prohibit\-password/PermitRootLogin Yes/g" /etc/ssh/sshd_config ;
```

**OLD**
```bash
# sed -i -e "s/\# \%wheel ALL\=(ALL) ALL/\%wheel ALL\=(ALL) ALL/g" /etc/sudoers ;
# sed -i -e "s/\#COMPRESSION\=\"bzip2\"/COMPRESSION\=\"bzip2\"/g" /etc/mkinitcpio.conf ;
```


**Mise à jour des paquets**
```bash
pacman -Syy ;
```


**Wi-Fi**
```bash
yay -S --noconfirm iwd ;
```


**Marc**
```bash
su - marc ;
```


**Yaourt**
```bash
git clone https://aur.archlinux.org/yay.git ;
cd yay ;
makepkg -si --noconfirm ;
```


**Firmware**
```bash
yay -S --noconfirm wd719x-firmware  ; # wd719x
yay -S --noconfirm aic94xx-firmware ; # aic94xx
yay -S --noconfirm upd72020x-fw     ; # xhci_pci
exit ;
```

--------------------------------------------------------------------------------
**Prise en charge de SystemD et LVM2**
```bash
sed -i -e "s/HOOKS\=(base udev autodetect modconf block filesystems keyboard fsck)/HOOKS\=(base systemd autodetect modconf block lvm2 filesystems keyboard fsck)/g" /etc/mkinitcpio.conf ;
```

**Appliquer les changements**
```bash
mkinitcpio -p linux ;
```

**User vers Root**
```
exit ;
```
