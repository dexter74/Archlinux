[A LIRE](https://wiki.archlinux.fr/systemd)

# Configuration des services :

----------------------------------------------------------------------------------------------------------------
### I . Désactivation des services (Précaution)

```bash
systemctl disable NetworkManager ;
systemctl disable systemd-networkd ;
systemctl disable systemd-resolved ;
systemctl disable wpa_supplicant ;
systemctl disable iwd ;
systemctl disable ntpd ; 
```


----------------------------------------------------------------------------------------------------------------
### II. Configuration et activation du Service de résolution DNS (Resolved)

##### A. Configuration ( /etc/systemd/resolved.conf )
```bash
[Resolve]
DNS=192.168.1.1
DNS=192.168.1.40
```

#### B. Création du Liens
```bash
rm /etc/resolv.conf ;
ln -s /etc/systemd/resolved.conf /etc/resolv.conf ;
```

#### C. Activation du service
```bash
systemctl enable systemd-resolved ;
```

#### D. Vérification du status du service
```bash
systemctl status systemd-resolved ;
```


----------------------------------------------------------------------------------------------------------------
### III. Configuration et activation du service Systemd-NetworkD :

##### A. Création du dossier network:
```bash
mkdir /etc/systemd/network ;
```

##### B. Configuration en Ethernet ( /etc/systemd/network/20-eth0.network )

```bash
[Match]
Type=ether

[Network]
LinkLocalAddressing=ipv4
DHCP=ipv4
```

##### C. Configuration en Ethernet ( /etc/systemd/network/20-wlan0.network )

```bash
[Match]
Type=wlan

[Network]
DHCP=ipv4
```

##### D. Activation du service
```bash
systemctl enable systemd-networkd ;
```

#### E. Vérification du status du service
```bash
systemctl status systemd-networkd ;
```


----------------------------------------------------------------------------------------------------------------
### III. Configuration et activation du service  wpa_supplicant 

##### A. Configuration du service ( /etc/wpa_supplicant/wpa_supplicant-wlan0.conf )

WPA2-PSK :
```bash
ctrl_interface=/var/run/wpa_supplicant
ctrl_interface_group=0
eapol_version=2
ap_scan=1
fast_reauth=1
network={
	SSID="NOM_DE_MON_RESEAU"
	psk="MACLESECRETE"
	priority=5
	}
```

##### B. Convertir la Clé en HASH

```bash
wpa_passphrase <SSID> <mapassphrase> >> /etc/wpa_supplicant/wpa_supplicant-wlan0.conf ;
```

##### C. Activation du service
```bash
systemctl enable wpa_supplicant@wlan0 ;
```

##### D. Etat du service
```bash
systemctl status wpa_supplicant@wlan0 ;
```


----------------------------------------------------------------------------------------------------------------
#### X. Activation du SSH
```bash
systemctl enable sshd ;
```

----------------------------------------------------------------------------------------------------------------
#### X. Activation du Plannificateur de tâches
```bash
systemctl enable cronie ;
```

----------------------------------------------------------------------------------------------------------------
#### X. Activation du Horloge
```bash
systemctl enable systemd-timesyncd.service ; 
```

----------------------------------------------------------------------------------------------------------------
#### X. Activation du Son
```bash
systemctl --user enable pipewire ;
```


----------------------------------------------------------------------------------------------------------------
#### X. Activation du Gestionnaire de Session
```bash
systemctl enable sddm ;
```





----------------------------------------------------------------------------------------------------------------
**Pendant l'install**
```bash
systemctl list-unit-files | grep enabled ;
systemctl | grep running ;

getty@.service                             enabled         enabled
netplan-ovs-cleanup.service                enabled-runtime disabled
systemd-fsck-root.service                  enabled-runtime disabled
systemd-homed-activate.service             enabled         disabled
systemd-homed.service                      enabled         enabled
systemd-networkd-wait-online.service       enabled         disabled
systemd-networkd.service                   enabled         enabled
systemd-pstore.service                     disabled        enabled
systemd-remount-fs.service                 enabled-runtime disabled
systemd-resolved.service                   enabled         enabled
systemd-timesyncd.service                  enabled         enabled
systemd-networkd.socket                    enabled         disabled
systemd-userdbd.socket                     enabled         enabled
machines.target                            disabled        enabled
reboot.target                              disabled        enabled
remote-cryptsetup.target                   disabled        enabled
remote-fs.target                           enabled         enabled


systemd-networkd-wait-online.service
systemd-homed.service
iwd.service                                enabled         disabled
```



**Exclus**
```bash
#systemctl enable ntpd ;
```


